# NewsAggregator

## Technical Architecture:

1. Find All the News and Capture It

- data source integrations
- content parsing and extraction
- storage
- scheduler (optional)

2. Present News to Human Editor

- ranking and filtering
- generating summaries/categories with AI components

3. Publish News to Webflow site

- news article selection
- export data as CSV to work with Webflow CMS

## Find All the News and Capture It

### Finding and parsing the news from following data sources

- Parsing Google RSS Feeds (using search queries provided by the team) using pygooglenews (most articles are captured from here)
- Parsing Specific RSS Feeds (looking online and provided by the team) using feedparser (podcasts, and other types of media can be captured here)

### Storing the news

- Create a Pydantic model to represent each news "article" collected, which will be referred to as NewsItem. This was done as news from multiple data sources need to be standardized in one format.

- The required fields for each NewsItem to add to the database are:
- - data_json: JSON data of the crawled news "article"
- - data_source_type: Type of data source from the following list ("Specific RSS Feed", "Google News RSS Feed", "Website")
- - data_URL: URL of the crawled news "article"

- Other fields are either derived from the JSON data or generated by the AI components of the app; these fields can optionally be saved to the database if necessary
- Create a SupabaseDBService to add new NewsItems to the Supabase Database (role access can be provided and/or migrated to a user on the core HLB team)

## Present News to Human Editor

### Viewing News on Flask App

- I used Flask to easily create both client-side and server-side endpoints, aka, routes that can be used to view data on the browser and routes that can be used to change/read/update/delete data
- run.py is the file used to run the Python app (locally, for now)
- - For local development, this requires a virtualenv to install all the dependencies.
- app.py is the file to create the Flask app and initialize the global instances required throughout the app
- routes.py is the file used to hold all the routes (/ for client-side, /api for server-side)
- templates folder has the HTML necessary to display data on the browser
- static folder holds the JS and CSS necessary for the app to interact with and look presentable
- The NewsItem has accessor methods that can be used throughout the Python application if the data is not necessarily stored in the Database (such as the NewsItem's article text.)

### Summaries and Categorization

- Each NewsItem's article text is derived from using the crawl4ai package to scrape the NewsItem's data_URL
- As of April 4, 2025, crawl4ai is a top contender for easily and efficiently scraping text from webpages to pass to LLMs. The package has a bug which I reported, and is being worked on.
- The extracted text can be used to provide input to an LLM, to generate summaries and assign categories.

### Categories for the News:

From my work with the Middle Housing Finance Hub team, I came to the conclusion of the following 4 categories:

- Government Updates regarding Legal & Financing Implications
- Company Updates regarding Products & Programs Offered
- Locality Updates regarding Construction & Community Projects
- Other Updates regarding Middle Housing Financing

<!-- ## Publish News for Webflow site
- Each NewsItem has a BOOLEAN (true/false) field called selected_for_display. This field is used to identify whether or not the article would be downloaded
- The intention is to have a button on the Flask app called "Download Articles CSV" that lets you download the articles selected for display as a CSV
- This CSV can then be used to update the Webflow CMS Collection -->
